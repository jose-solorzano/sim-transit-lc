apply plugin: 'java'
apply plugin: 'eclipse'

sourceCompatibility = '1.8'
targetCompatibility = '1.8'
version = '1.0'

repositories {
    mavenCentral()
    flatDir {
        dirs 'libs'
    }
}

dependencies {
	compile "org.apache.commons:commons-math:2.2"
	compile "org.apache.commons:commons-csv:1.1"
	compile "com.fasterxml.jackson.core:jackson-databind:2.8.7"
	compile "commons-cli:commons-cli:1.2"
	compile "javax.validation:validation-api:1.0.0.GA"
	compile fileTree(dir: 'libs', include: '*.jar')
	testCompile 'junit:junit:4.12'
}

task dumpDependencies {
  def cp = new File('build/libs/sim-transit-lc-' + version + '.jar').absolutePath;
  configurations.compile.each {  
  	cp += File.pathSeparator
    cp += String.valueOf(it);
  }
  def depsFile = new File('.dependencies.txt')
  depsFile.write(cp);
}

build.dependsOn dumpDependencies
